var _ngAppCampaignPage = angular.module('ngPFPCampaignPage', ['ngSanitize', 'infinite-scroll']);


_ngAppCampaignPage.filter('to_trusted', ['$sce', function ($sce) {
    return function (text) {
        return $sce.trustAsHtml(text);
    };
}]);

_ngAppCampaignPage.controller("ngCtrlPFPCampaignPage", ['$scope', '$log', '$filter', '$interval', '$sce', function ($scope, $log, $filter, $interval, $sce) {

    $scope.Reward = {};
    $scope.InitiateSetRewards = function (direction, types) {
        $scope.Reward = {};
		$scope.Reward.hasRewards = true;
        $scope.Reward.direction = direction;
        $scope.Reward.types = types;

    }

    $scope.Donors = {};
    $scope.FeedDetails = {
        feeds: []
    };

    // Shailesh to limit the rows to be displayed upto 10
    $scope.numberToDisplay = 10;
    $scope.rewardURL = '';
    $scope.ShouldLoadMembersSection = true;
    $scope.ShowDonorSection = false;
    $scope.ShowDonorOnlySection = false;
    $scope.DonorsSortOrder = 1;
    $scope.RewardQS = '';


    $scope.isMobile = function () {
        var check = false;
        (function (a) { if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0, 4))) check = true; })(navigator.userAgent || navigator.vendor || window.opera);

        return check;
    }

    $scope.DonateNowForReward = function (reward, currencyId) {
        //console.log(reward.donateNowLink);
		//debugger;
        if (reward.donateNowLink != '') {
            $scope.rewardURL = reward.donateNowLink + '&' + '&rewcurrid=' + currencyId + '&hiderecurring=1' + _qsAddtion ;
            if ($scope.RewardQS) {
                $scope.rewardURL += $scope.RewardQS;
            }
            $scope.PopupNow();
			$scope.rewardURL  = '';
        }
    }

    $scope.ManipulateAmount = function (donor) {
        if (typeof localManipulateAmount != 'undefined' && $.isFunction(localManipulateAmount)) {
            return localManipulateAmount(donor.amount);
        }
        else {
            return donor.amount;
        }
    }

    $scope.InitiatePayment = function (queryString) {
        //create iframe - 
        var iframeSrc = _donateURL;
        if (_angularScope.payPalSuccess == true) {
            //iframeSrc = _donateURL;
        }
        else {

            //commented - Shailesh 25-05-2019 to change it to pay
            iframeSrc = _donateURL + '?' + queryString;
            if ($scope.rewardURL != '') {
                iframeSrc = $scope.rewardURL.replace('/donate', '/iframe') + '&' + queryString;
            }

            //iframeSrc = _donateURL + '?' + queryString + $scope.rewardURL;

        }
        //console.log(iframeSrc);
        //$("#paymentIframeContainer").html("<iframe id='iframePayment' onload='onPaymentFrameLoad(this)' src='" + iframeSrc + "' style='border:0px; width:600px; max-height:700px; min-height:635px; display:block;'></iframe>");
        $("#paymentIframeContainer").html("<iframe id='iframePayment' onload='onPaymentFrameLoad(this)' src='" + iframeSrc + "' style='border:0px; width:100%; display:block;'></iframe>");
        //$('#iframePayment').attr('src', iframeSrc);
        $('#modal_Payment').modal('show');
        $scope.ShowPaymentLoading();
        //$scope.checkPaymentFormLoaded();
    }

    $scope.ShowPaymentLoading = function () {
        $('#loadingForPayment').show();
    }

    $scope.HidePaymentLoading = function () {
        $('#loadingForPayment').hide();

    }

    $scope.checkPaymentFormLoaded = function () {
        // Get a handle to the iframe element
        var iframe = document.getElementById('iframePayment');
        var iframeDoc = iframe.contentDocument || iframe.contentWindow.document;

        // Check if loading is complete
        if (iframeDoc.readyState == 'complete') {
            console.log('iframe loaded...');
            $scope.HidePaymentLoading()
            // The loading is complete, call the function we want executed once the iframe is loaded
            return;
        }
        else {
            console.log('iframe NOT loaded...');
        }

        // If we are here, it is not loaded. Set things up so we check   the status again in 100 milliseconds
        window.setTimeout($scope.checkPaymentFormLoaded, 100);
    }



    $scope.PopupNow = function (addition) {
		//debugger;
        var queryString = '';
        if (_currentLanguage == 'he') {
            queryString = 'lang=he&';
        }
        if (addition) {
            queryString += addition + '&';
        }
        queryString += "successurl=" + _paymentStatusUrl + "&fullcampgainurl=" + _FullCampgainURL + "&usec=0&lng=" + _CampgainLang + "&campgainurl=" + _CampgainURL + "";
        $scope.InitiatePayment(queryString);
    }


    $scope.InitiateDonorList = function (direction, donors, defaultImagePath, moreDonors) {
        $scope.Donors = {};
        $scope.Donors.direction = direction;
        $scope.Donors.list = [];
        $scope.Donors.donorCount = 0;
        //if mobile we -get first fifty records....
        $scope.Donors.donorCount = donors.length + moreDonors;
        if ($scope.isMobile()) {
            //console.log('MOBILE');
            $scope.Donors.list = donors.slice(0, 50);
        }
        else {
            //console.log('NOT MOBILE');
            $scope.Donors.list = donors;
        }
        //$scope.Donors.list = donors.slice(0, 5);

        $.each($scope.Donors.list, function (donIndx, donObj) {
            donObj.image = (donObj.image == "defaultImageUrl" ? defaultImagePath : donObj.image);
        });
        $scope.ShowDonorSection = $scope.ShowDonorSection || $scope.Donors.list.length > 0;
    }


    $scope.InitiateTeamMembersList = function (direction, teamMembers) {
        $scope.TeamMembers = {};
        $scope.TeamMembers.direction = direction;
        if ($scope.ShouldLoadMembersSection) {
            $scope.TeamMembers.list = teamMembers;
            $scope.ShowDonorSection = $scope.TeamMembers.list.length > 0;
        }
    }

    $scope.InitiateFeedDetails = function (direction, feedUpdates) {
        $scope.FeedDetails = {};
        $scope.FeedDetails.direction = direction;
        $scope.FeedDetails.feeds = feedUpdates;
    }

    $scope.InitPageDetails = function (pageData) {
        $scope.PageData = pageData;
    }



    $scope.GetYouTubeEmbedUrl = function (src) {
        if (src != '') {
            return $sce.trustAsResourceUrl(src);
        }
        return '';
    }

    $scope.JoinCampaign = {
        languages: [],
        showRegister: true,
        hasNoGoal: false,
        sum: 10000

    };

    $scope.ParentJoinCampaign = {};
    $scope.JoinCampaignToEdit = {};

    $scope.IsActiveLanguage = function (langid) {
        var found = false;
        $.each($scope.JoinCampaign.languages, function (i, obj) {

            if (obj == langid) {

                found = true;
            }
        });

        return found;

        /*var lng = $.grep($scope.JoinCampaign.languages, function (l) { return l == langid; });
        if (lng != null && lng > 0)
            return true;
        return false;*/
    }

    $scope.ToggleRegisterLogin = function (state) {
        $scope.JoinCampaign.showRegister = state == 1;
    }

    //Shailesh 05-02-2019
    $scope.loadMore = function () {
        //console.log('Shailesh');
        if ($scope.Donors.list != null) {
            if ($scope.numberToDisplay + 5 < $scope.Donors.list.length) {
                $scope.numberToDisplay += 5;
            } else {
                $scope.numberToDisplay = $scope.Donors.list.length;
            }
        }
    };

    $scope.SendToPasswordReminder = function () {
        window.location = 'https://account.israelgives.org/' + _currentLanguage + '/UserRecoverPassword?ReturnUrl=' + encodeURI(window.location.href);
    }

}]);



function onPaymentFrameLoad(iframe) {
    try {
        //// Displays the first 50 chars in the innerHTML of the
        //// body of the page that the iframe is showing.
        //// EDIT 2012-04-17: for wider support, fallback to contentWindow.document
        //var doc = iframe.contentDocument || iframe.contentWindow.document;
        //alert(doc.body.innerHTML.substring(0, 50));
    } catch (e) {
        // This can happen if the src of the iframe is
        // on another domain
    }
    finally {
        _angularScope.HidePaymentLoading();
    }
}




function InitilaizePageCreation() {

    ShowFirstTabInJoinCampaign();

    //move to step 2
    $('.wizard-steps a[href="#w3-2"]').tab('show');
    //Set default tab fro join campaign
    if (_currentLanguage == 'he') {
        $('.nav-tabs a[href="#w2-hebrew"]').tab('show');
    }

}

function ShowFirstTabInJoinCampaign() {
    //SET active tab for JOIN Campaign
    if (_angularScope.JoinCampaign.languages.length > 0) {
        if (_angularScope.JoinCampaign.languages[0] == 1) {
            $('.nav-tabs a[href="#w2-english"]').tab('show');
        }
        else if (_angularScope.JoinCampaign.languages[0] == 2) {
            $('.nav-tabs a[href="#w2-hebrew"]').tab('show');
        }
        else if (_angularScope.JoinCampaign.languages[0] == 3) {
            $('.nav-tabs a[href="#w2-french"]').tab('show');
        }
    }
}


function CreateTeamCampaign() {
    if (ValidateTeamCampaign()) {

        $('.fbwizardProcessing').hide();
        $('.imgprocessing').show();

        var formData = new FormData();
        if ($('#filuploadTeamVideo').get(0).files.length > 0) {
            formData.append('filuploadTeamVideo', $('#filuploadTeamVideo').get(0).files[0]);
            //Add image name
            _angularScope.JoinCampaign.videoFileName = $('#filuploadTeamVideo').get(0).files[0].name;
        }

        _angularScope.JoinCampaign.whiteLabelId = _whiteLabelId;
        _angularScope.JoinCampaign.pagename = _pageName;
        _angularScope.JoinCampaign.currentLanguage = _currentLanguage;
        //console.debug(_angularScope.JoinCampaign.hasNoGoal);
        _angularScope.JoinCampaign.sum = _angularScope.JoinCampaign.sum == "" ? "0" : _angularScope.JoinCampaign.sum;
        if (_angularScope.JoinCampaign.hasNoGoal == true) {
            _angularScope.JoinCampaign.sum = "0";
        }
        var jsonModel = JSON.stringify(_angularScope.JoinCampaign);
        formData.append('jsonModel', jsonModel);

        $.ajax({
            type: "POST",
            url: "join/team",
            data: formData,
            cache: false,
            contentType: false,
            processData: false,
            beforeSend: function () {

            },
            success: function (RESULT) {
                $('#wizardJoinCampaign .formteamcampaignerror').show();
                if (RESULT.status == "1") {
                    var url = RESULT.msg;
                    if (_newUser == true) {
                        url += '?newreg=1'
                    }
                    window.location.href = url;//RESULT.msg;
                }
                else {
                    $('.fbwizardProcessing').show();
                    $('.imgprocessing').hide();
                    $('#wizardJoinCampaign .formteamcampaignerror > span').text(_errorMsgServerError);
                }
            },
            failure: function () {
                $('.fbwizardProcessing').show();
                $('.imgprocessing').hide();
            },
            complete: function () {
                //$('.fbwizardProcessing').show();
                //$('.imgprocessing').hide();
            }
        });
    }


    return false;
}

function ValidateTeamCampaign() {
    $('#wizardJoinCampaign .formteamcampaignerror > span').text('');
    $('#wizardJoinCampaign .formteamcampaignerror').hide();
    if (_angularScope.JoinCampaign.hasNoGoal == false) {
        if (!isInteger($.trim(_angularScope.JoinCampaign.sum))) {
            $('#wizardJoinCampaign .formteamcampaignerror').show();
            $('#wizardJoinCampaign .formteamcampaignerror > span').text(_errorMsgInvalidDonationSum);
            return false;
        }
    }
    if (!ValidFundraisingMessage()) {
        $('#wizardJoinCampaign .formteamcampaignerror').show();
        $('#wizardJoinCampaign .formteamcampaignerror > span').text(_errorMsgInvalidFundRaisingMessage);
        return false;
    }
    if (!ValidFundraisingVideo()) {
        $('#wizardJoinCampaign .formteamcampaignerror').show();
        $('#wizardJoinCampaign .formteamcampaignerror > span').text(_errorMsgInvalidVideo);
        return false;
    }
    return true;
}

function ValidFundraisingVideo() {
    var valid = true;
    if ($('#filuploadTeamVideo').get(0).files.length > 0) {
        var filename = $('#filuploadTeamVideo').get(0).files[0].name.split('.');
        if (filename.length > 0 &&
            (filename[filename.length - 1].toLowerCase() == 'mov') ||
            (filename[filename.length - 1].toLowerCase() == 'mp4') ||
            (filename[filename.length - 1].toLowerCase() == 'ogg') ||
            (filename[filename.length - 1].toLowerCase() == 'webm')) {
            valid = true;
        }
        else {
            valid = false;
        }
    }
    return valid;

}


function ValidFundraisingMessage() {
    var isvalid = false;
    var defaultText = '';
    for (var i = 0; i < _angularScope.JoinCampaign.languages.length && !isvalid; i++) {
        if (_angularScope.JoinCampaign.languages[i] == 1 && $.trim(_angularScope.JoinCampaign.descEnglish) != '') {
            isvalid = true;
            defaultText = $.trim(_angularScope.JoinCampaign.descEnglish);
        }
        else if (_angularScope.JoinCampaign.languages[i] == 2 && $.trim(_angularScope.JoinCampaign.descHebrew) != '') {
            isvalid = true;
            defaultText = $.trim(_angularScope.JoinCampaign.descHebrew);
        }
        else if (_angularScope.JoinCampaign.languages[i] == 3 && $.trim(_angularScope.JoinCampaign.descFrench) != '') {
            isvalid = true;
            defaultText = $.trim(_angularScope.JoinCampaign.descFrench);
        }
    }

    //Set default languages if empty
    if (isvalid) {

        if ($.trim(_angularScope.JoinCampaign.descEnglish) == '') {
            _angularScope.JoinCampaign.descEnglish = defaultText;
        }
        if ($.trim(_angularScope.JoinCampaign.descHebrew) == '') {
            _angularScope.JoinCampaign.descHebrew = defaultText;
        }
        if ($.trim(_angularScope.JoinCampaign.descFrench) == '') {
            _angularScope.JoinCampaign.descFrench = defaultText;
        }
    }
    return isvalid;
}

var popup = null;
function FacebookConnect() {
    $('.fbwizardProcessing').hide();
    $('.imgprocessing').show();
    popup = window.open(_facebookConnectURL, "facebook_popup",
        "width=850,height=600,status=no,scrollbars=no,resizable=no");
    popup.focus();
}

function closeFacebookConnect(status, newreg) {
    $('.fbwizardProcessing').show();
    $('.imgprocessing').hide();
    if (newreg != null && newreg == 1) {
        _newUser = true;
    }
    if (status == 1) {
        InitilaizePageCreation();
    }
    else {
        $(".fbfailed").show();
        $(".fbfailed").fadeOut(10000);
    }
}

function registerUser() {
    if (ValidateUserInfoForRegister()) {
        $('.fbwizardProcessing').hide();
        $('.imgprocessing').show();
        //fileJoinTeamProfile
        var formData = new FormData();
        var userInfo = {};
        userInfo.source = "joincampaign";
        userInfo.action = "2";
        userInfo.email = encodeURIComponent($.trim($('#wizardJoinCampaign #tbemail').val()));
        userInfo.password = $.trim($('#wizardJoinCampaign #tbpassword').val());
        userInfo.firstName = $.trim($('#wizardJoinCampaign #tbFirstName').val());
        userInfo.lastName = $.trim($('#wizardJoinCampaign #tbLastName').val());

        if ($('#fileJoinTeamProfile').get(0).files.length > 0) {
            formData.append('fileJoinTeamProfile', $('#fileJoinTeamProfile').get(0).files[0]);
            //Add image name
            userInfo.ProfileImageOriginalFileName = $('#fileJoinTeamProfile').get(0).files[0].name;
        }

        var jsonModel = JSON.stringify(userInfo);
        formData.append('jsonModel', jsonModel);

        $.ajax({
            type: "POST",
            url: "/pages/campaign/handlers/useractions.ashx",
            data: formData,
            cache: false,
            contentType: false,
            processData: false,
            beforeSend: function () {

            },
            success: function (RESULT) {
                if (RESULT.status != "ok") {
                    $('#wizardJoinCampaign .formerror').show();
                    if (RESULT.errortype == "101") {
                        $('#wizardJoinCampaign .formerror > span').text(_errorMsgAlreadyRegistered);
                    }
                    else {
                        $('#wizardJoinCampaign .formerror > span').text(_errorMsgServerError);
                    }
                }
                else {

                    InitilaizePageCreation();
                    _newUser = true;
                }
            },
            failure: function () {

            },
            complete: function () {
                $('.fbwizardProcessing').show();
                $('.imgprocessing').hide();

            }
        });
    }

    return false;
}

var _newUser = false;

function signInUser() {
    if (ValidateUserInfoForSignIn()) {
        $('.fbwizardProcessing').hide();
        $('.imgprocessing').show();
        //fileJoinTeamProfile
        var formData = new FormData();
        var userInfo = {};
        userInfo.source = "joincampaign";
        userInfo.action = "1";
        userInfo.email = $.trim($('#wizardJoinCampaign #tbemail').val());
        userInfo.password = $.trim($('#wizardJoinCampaign #tbpassword').val());

        var jsonModel = JSON.stringify(userInfo);
        formData.append('jsonModel', jsonModel);

        $.ajax({
            type: "POST",
            url: "/pages/campaign/handlers/useractions.ashx",
            data: formData,
            cache: false,
            contentType: false,
            processData: false,
            beforeSend: function () {

            },
            success: function (RESULT) {
                if (RESULT.status != "ok") {
                    $('#wizardJoinCampaign .formerror').show();
                    if (RESULT.errortype == "103") {
                        $('#wizardJoinCampaign .formerror > span').text(_errorMsgInvalidCredentials);
                    }
                    else {
                        $('#wizardJoinCampaign .formerror > span').text(_errorMsgServerError);
                    }
                }
                else {
                    InitilaizePageCreation();

                }
            },
            failure: function () {

            },
            complete: function () {
                $('.fbwizardProcessing').show();
                $('.imgprocessing').hide();

            }
        });
    }

    return false;
}

function ValidateUserInfoForSignIn() {
    $('#wizardJoinCampaign .formerror > span').text('');
    $('#wizardJoinCampaign .formerror').hide();
    if (!validateEmail($.trim($('#wizardJoinCampaign #tbemail').val()))) {
        $('#wizardJoinCampaign .formerror').show();
        $('#wizardJoinCampaign .formerror > span').text(_errorMsgInvalidEmail);
        return false;
    }
    if ($.trim($('#wizardJoinCampaign #tbpassword').val()).length < 6) {
        $('#wizardJoinCampaign .formerror').show();
        $('#wizardJoinCampaign .formerror > span').text(_errorMsgInvalidPassword);
        return false;
    }
    return true;
}

function ValidateUserInfoForRegister() {
    $('#wizardJoinCampaign .formerror > span').text('');
    $('#wizardJoinCampaign .formerror').hide();
    if (!validateEmail($.trim($('#wizardJoinCampaign #tbemail').val()))) {
        $('#wizardJoinCampaign .formerror').show();
        $('#wizardJoinCampaign .formerror > span').text(_errorMsgInvalidEmail);
        return false;
    }
    if ($.trim($('#wizardJoinCampaign #tbpassword').val()).length < 6) {
        $('#wizardJoinCampaign .formerror').show();
        $('#wizardJoinCampaign .formerror > span').text(_errorMsgInvalidPassword);
        return false;
    }
    if ($.trim($('#wizardJoinCampaign #tbFirstName').val()) == '') {
        $('#wizardJoinCampaign .formerror').show();
        $('#wizardJoinCampaign .formerror > span').text(_errorMsgInvalidFName);
        return false;
    }
    if ($.trim($('#wizardJoinCampaign #tbLastName').val()) == '') {
        $('#wizardJoinCampaign .formerror').show();
        $('#wizardJoinCampaign .formerror > span').text(_errorMsgInvalidLName);
        return false;
    }
    //if ($('#fileJoinTeamProfile').get(0).files.length == 0) {
    //    $('#wizardJoinCampaign .formerror').show();
    //    $('#wizardJoinCampaign .formerror > span').text(_errorMsgInvalidProfileImage);
    //    return false;
    //}
    return true;
}

function validateEmail(email) {
    var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(email);
}

function isInteger(value) {
    if (Math.floor(value) == value && $.isNumeric(value) && value > 0) {
        return true;
    }
    else {
        return false;
    }
};